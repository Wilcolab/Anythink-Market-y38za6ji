

/**
 * Converts a string to snake_case.
 * * @param {string} str - The input string to convert.
 * @returns {string} The snake_case version of the string.
 */
function toSnakeCase(str) {
  return str
    // Handle camelCase and PascalCase by inserting an underscore before capitals
    .replace(/([a-z])([A-Z])/g, '$1_$2')
    // Replace spaces, hyphens, and other non-alphanumeric characters with underscores
    .replace(/[\s\-\.]+/g, '_')
    // Remove any characters that aren't letters, numbers, or underscores
    .replace(/[^a-zA-Z0-9_]/g, '')
    // Ensure the entire string is lowercase
    .toLowerCase()
    // Clean up double underscores if they exist
    .replace(/__+/g, '_')
    // Trim underscores from start and end
    .replace(/^_+|_+$/g, '');
}

// Quick tests:
// toSnakeCase("PromptEngineering") -> "prompt_engineering"
// toSnakeCase("zero-shot-prompt")   -> "zero_shot_prompt"

// trying